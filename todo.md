# todo

### ゲームプレイ・コンテンツ
- [ ] output接続が行われていないピースで、アイテムが流入してしまっている問題を解決する。
- [x] アウトプットインベントリが20個以上あるときは、ピースの生産を中断する仕様を追加する
	- [x] ItemContainer: 合計アイテム数を取得できる
	- [x] Crafter: 出力先が満杯（20個以上）なら加工を開始しない
- [x] インプットインベントリにも20個の容量制限を設ける
	- [x] Piece: インベントリが満杯（合計20個以上）なら `can_accept_item` が `false` を返す
	- [x] Transporter: ターゲットが満杯ならアイテムを移動させない
- [ ] 即座にアイテムが接続先ピースに送られる挙動（upload lab方式）に変更する

### リファクタリング
- [ ] pieceクラスにおいて、機能部分とview部分が混在しているので、これを修正するべきか検討する
- [ ] チェスト(Storage)などのピースタイプに応じて、ItemContainerコンポーネントの生成構成を最適化する（Input/Outputで実体を共有するなど）
- [ ] crafter.gdにある、0.001等のマジックナンバーは不吉な臭いです。これを修正する
- [ ] test_gridmanager, test_main: 内部クラスに整理し、命名を日本語に統一する
- [ ] paletteとpalette_uiの責務分離が分かりづらい。統合したほうが良いか検討する。

## 将来的なタスク・メモなど（AIはこれを編集・削除しないでください）
- [ ] マウスホイールでツールバーに割り当てられたピースの選択ができるようにする
- [ ] ポート回転ロジック(get_rotate_portsなど)は、hexクラス等に共通化できるかも。検討する
- [ ] 詳細表示モード時に、インプットとアウトプットの表示が重なる問題を修正する（レイアウト調整）。
- [ ] pallette uiをhexfrvrによせる。
- [ ] ピースの種類を増やす（テトラへクス以外にも色々）
- [ ] ピースをグループ化し、パレットでカテゴリごとに表示する。
- [ ] マウスオーバーで設置済みピースの詳細情報ラベルが表示される
